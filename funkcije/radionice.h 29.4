#pragma once
#include "helper.h"

void RobotLine::radionica() {
static int broj = 0;
static uint32_t lastLineMs = 0;
  static uint32_t vrijeme = 0;
  static int br=0;
  static int krug=0;

/*pratiLiniju();
if (broj==0 and line(0) and line(8)){
  go(-90,90),delayMs(450);
  broj++;
  
}
if (broj==1 and not lineAny() ){
   go(40, 60);
}
if (broj==1 and front()> 140 and front()<150){
  
  izbjegniObjekt();
  broj++;
}
if (broj==2 and line(8) and line(5)){
  go(60,60),delayMs(500);
  broj++;
}
if (broj==3 and line(0) and line(3)){
  go(-90,90),delayMs(900);
  broj++;
}
if (broj==4 and line(0) and line(3)){
  go(90,-90),delayMs(450);
  broj++;
}*/
if(broj==0)
{
  armOpen();
  if (leftFront()<150 and leftFront()>100 and br==0) {
    stop(), delayMs(500);
    go(50, 50), delayMs(500);
    go(-90, 90), delayMs(500);
    lastLineMs = millis();
    armClose();
    while (leftFront() > 110) {
      go(20, 20);
      noLoopWithoutThis();
    }
    stop(), delayMs(2000);
    armOpen();
    go(20, 20), delayMs(1000);
    armClose(),delayMs(1000);
    vrijeme = millis() - lastLineMs;
    go(-20, -20), delayMs(vrijeme);
    go(90,-90),delayMs(500);
    br++;
  }
 if(krug==0 or krug==1 or krug==2 or krug==3) {
   if (rightFront() > 120)
    go(80, 20);
  else
    go(20, 80);
  if (front()<120){
  go(-90,90),delayMs(450);
  krug++;
}
  if(rightFront()
}
 if(krug==4 or krug==5 or krug==6 or krug==7) {
   if (rightFront() > 150)
    go(80, 20);
  else
    go(20, 80);
  if (front()<150){
  go(-90,90),delayMs(450);
  krug++;
}
}
 if(krug==8 or krug==9 or krug==10 or krug==11) {
   if (rightFront() > 180)
    go(80, 20);
  else
    go(20, 80);
  if (front()<180){
  go(-90,90),delayMs(450);
  krug++;
}
}
if(krug==12){
  stop(),end();
}
  

if(br==1){
  armClose();
  while (not lineAny()){
    if (rightFront() > 160)
    go(120, 80);
  else
    go(80, 120);
    noLoopWithoutThis();
  }
  stop(),end();
}
}

  char simbol[10 + sizeof(char)];
  sprintf(simbol,"%d",krug);
  display(simbol);
}
